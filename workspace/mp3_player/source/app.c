/********************************************************************************
  @file     App.c
  @brief    Application functions
  @author   N. Magliola, G. Davidov, F. Farall, J. Gayt√°n, L. Kammann, N. Trozzo
 *******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/

#include "board/board.h"
#include "events/events.h"
#include "display/display.h"

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/

/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * VARIABLES TYPES DEFINITIONS
 ******************************************************************************/

/*******************************************************************************
 * PRIVATE VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

static event_t event;												// Application loop events
static ws2812_pixel_t display[DISPLAY_COL_SIZE][DISPLAY_ROW_SIZE];	// Application display

/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

void appInit (void)
{
	boardInit();
 	eventsInit();
	displayInit();
}

void appRun (void)
{
	event = eventsGetNextEvent();
	if (event.id != EVENTS_NONE)
	{
		if (event.id == EVENTS_PLAY_PAUSE)
		{
			for (uint32_t i = 0 ; i < DISPLAY_ROW_SIZE ; i++)
			{
				for (uint32_t j = 0 ; j < DISPLAY_COL_SIZE ; j++)
				{
					ws2812_pixel_t pixel = WS2812_COLOR_RED;
					display[i][j] = pixel;
				}
			}
			displayFlip(&display);
		}
	}
}

/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 ******************************************************************************/
